{
  "info": {
    "_postman_id": "8fb42d1a-8dd1-4137-9b64-6cf9bb8b6490",
    "name": "KGP Control API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Collection to test the FastAPI backend for Kharagpur Station Control. Set the base_url variable in an environment to your backend (e.g., https://railway-production-f8eb.up.railway.app or http://localhost:8000)."
  },
  "item": [
    {
      "name": "Health",
      "request": {
        "method": "GET",
        "header": [],
        "url": {"raw": "{{base_url}}/api/health", "host": ["{{base_url}}"], "path": ["api","health"]}
      }
    },
    {
      "name": "Incoming Lines",
      "request": {"method": "GET", "header": [], "url": {"raw": "{{base_url}}/api/incoming-lines", "host": ["{{base_url}}"], "path": ["api","incoming-lines"]}}
    },
    {
      "name": "Station Data",
      "request": {"method": "GET", "header": [], "url": {"raw": "{{base_url}}/api/station-data", "host": ["{{base_url}}"], "path": ["api","station-data"]}}
    },
    {
      "name": "Platform Suggestions",
      "request": {
        "method": "POST",
        "header": [{"key": "Content-Type", "value": "application/json"}],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"trainNo\": \"${trainNo}\",\n  \"incomingLine\": \"${incomingLine}\",\n  \"platforms\": ${platformsJson},\n  \"freightNeedsPlatform\": ${freightNeedsPlatform}\n}"
        },
        "url": {"raw": "{{base_url}}/api/platform-suggestions", "host": ["{{base_url}}"], "path": ["api","platform-suggestions"]}
      },
      "event": [
        {"listen": "test", "script": {"exec": [
          "pm.test('Status 200', function () { pm.response.to.have.status(200); });",
          "pm.test('Has suggestions array', function () { var json = pm.response.json(); pm.expect(Array.isArray(json.suggestions)).to.be.true; });"
        ], "type": "text/javascript"}}
      ]
    },
    {
      "name": "Add to Waiting List",
      "request": {"method": "POST", "header": [{"key": "Content-Type","value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"trainNo\": \"${trainNo}\"\n}"}, "url": {"raw": "{{base_url}}/api/add-to-waiting-list","host": ["{{base_url}}"], "path": ["api","add-to-waiting-list"]}}
    },
    {
      "name": "Remove from Waiting List",
      "request": {"method": "POST", "header": [{"key": "Content-Type","value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"trainNo\": \"${trainNo}\"\n}"}, "url": {"raw": "{{base_url}}/api/remove-from-waiting-list","host": ["{{base_url}}"], "path": ["api","remove-from-waiting-list"]}}
    },
    {
      "name": "Assign Platform",
      "request": {"method": "POST", "header": [{"key": "Content-Type","value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"trainNo\": \"${trainNo}\",\n  \"platformIds\": [\"Platform 1\"],\n  \"actualArrival\": \"${HHMM}\"\n}"}, "url": {"raw": "{{base_url}}/api/assign-platform","host": ["{{base_url}}"], "path": ["api","assign-platform"]}}
    },
    {
      "name": "Unassign Platform",
      "request": {"method": "POST", "header": [{"key": "Content-Type","value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"platformId\": \"Platform 1\"\n}"}, "url": {"raw": "{{base_url}}/api/unassign-platform","host": ["{{base_url}}"], "path": ["api","unassign-platform"]}}
    },
    {
      "name": "Depart Train",
      "request": {"method": "POST", "header": [{"key": "Content-Type","value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"platformId\": \"Platform 1\"\n}"}, "url": {"raw": "{{base_url}}/api/depart-train","host": ["{{base_url}}"], "path": ["api","depart-train"]}}
    },
    {
      "name": "Log Depart Line",
      "request": {"method": "POST", "header": [{"key": "Content-Type","value": "application/json"}], "body": {"mode": "raw", "raw": "{\n  \"platformId\": \"Platform 1\",\n  \"line\": \"UP MAIN\"\n}"}, "url": {"raw": "{{base_url}}/api/log-depart-line","host": ["{{base_url}}"], "path": ["api","log-depart-line"]}}
    },
    {
      "name": "Download Report (CSV)",
      "request": {"method": "GET", "header": [], "url": {"raw": "{{base_url}}/api/report/download?date={{date}}", "host": ["{{base_url}}"], "path": ["api","report","download"], "query": [{"key":"date","value":"{{date}"}]}}
    },
    {
      "name": "DEBUG Push SSE Alert",
      "request": {"method": "GET", "header": [], "url": {"raw": "{{base_url}}/api/debug/push-alert", "host": ["{{base_url}}"], "path": ["api","debug","push-alert"]}}
    }
  ]
}
